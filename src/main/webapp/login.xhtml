<!DOCTYPE html [
    <!ENTITY times "&#215;"> 
]>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:f="http://java.sun.com/jsf/core">
	<h:head>
		<meta charset="UTF-8" />
		<title>FARMS | Login</title>
		<meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport' />
		<!-- Bootstrap 3.3.4 -->
		<link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
		<!-- Font Awesome Icons -->
		<link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
		<!-- Theme style -->
		<link href="dist/css/AdminLTE.min.css" rel="stylesheet" type="text/css" />
		<!-- FARMS -->
		<link href="dist/css/farms.css" rel="stylesheet" type="text/css" />
		<!-- iCheck -->
		<link href="plugins/iCheck/square/green.css" rel="stylesheet" type="text/css" />

		<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
			<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->
	</h:head>
	<h:body class="login-page">
		<div class="login-box">
			<div class="login-logo">
				<b>F</b>ARMS
			</div><!-- /.login-logo -->
			<div class="login-box-body">
				<div class="row">
					<div class="col-sm-7">
						<!-- Custom Tabs -->
						<div class="nav-tabs-custom farms-login">
							<ul class="nav nav-tabs">
								<li class="active"><a href="#login" data-toggle="tab"><h:outputText value=" #{msg['log_in']}" /></a></li>
								<li><a href="#register" data-toggle="tab"><h:outputText value=" #{msg['register']}" /></a></li>
							</ul>
							<div class="tab-content">
								<div class="tab-pane active" id="login">
									<h:form>
										<div class="form-group has-feedback">
											<h:inputText p:type="email" class="form-control input-lg" p:placeholder="Email" p:required="true" />
											<span class="fa fa-envelope form-control-feedback"></span>
										</div>
										<div class="form-group has-feedback">
											<h:inputSecret type="password" class="form-control input-lg" p:placeholder="#{msg['password']}" p:required="true" />
											<span class="fa fa-lock form-control-feedback"></span>
										</div>
										<div class="row">
											<div class="col-xs-7">    
												<div class="checkbox icheck">
													<label style="font-size:16px;">
														<h:selectBooleanCheckbox type="checkbox" /> <h:outputText value=" #{msg['remember_me']}" />
													</label>
												</div>                        
											</div><!-- /.col -->
											<div class="col-xs-5">
												<h:commandButton type="submit" class="btn btn-success btn-block btn-flat btn-lg" value="#{msg['log_in']}" />
											</div><!-- /.col -->
										</div>
									</h:form>

									<p class="login-box-msg"><a href="#"><h:outputText value="#{msg['forgot_password']}" /></a></p>
									
									<hr/>
									<h:form>
										<h:commandButton action="#{language.changeLanguage('')}"
											value="English" image="dist/img/languages/uk.png" />
										<h:outputText value="&#160;" />
										<h:commandButton action="#{language.changeLanguage('pt')}"
											value="Portuguese" image="dist/img/languages/br.png" />
									</h:form>
									
								</div><!-- /.tab-pane -->

								<div class="tab-pane" id="register">
									<h:form id="register-form">
										<div class="row">
											<div class="col-xs-12">
												<!-- <div class="alert alert-success alert-dismissable">
													<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
								                    <h4><i class="icon fa fa-check"></i> Alert!</h4>
								                    Success alert preview. This alert is dismissable.
												</div>-->
												<h:outputText id="message" value="#{loginBean.response}" escape="false" />
											</div>
										</div>
										
										<div class="form-group has-feedback">
											<h:inputText type="text" class="form-control input-lg" p:placeholder="#{msg['name']}" p:required="true"
											value="#{loginBean.name}"/>
											<span class="fa fa-user form-control-feedback"></span>
										</div>
										<div class="form-group has-feedback">
											<h:inputText p:type="email" class="form-control input-lg" p:placeholder="Email" p:required="true"
											value="#{loginBean.email}"/>
											<span class="fa fa-envelope form-control-feedback"></span>
										</div>
										<div class="form-group has-feedback">
											<h:inputSecret type="password" class="form-control input-lg" p:placeholder="#{msg['password']}" p:required="true"
											value="#{loginBean.password}"/>
											<span class="fa fa-lock form-control-feedback"></span>
										</div>
										<div class="form-group has-feedback">
											<h:inputSecret type="password" class="form-control input-lg" p:placeholder="#{msg['password_confirm']}" p:required="true" 
											value="#{loginBean.passwordAgain}"/>
											<span class="fa fa-lock form-control-feedback"></span>
										</div>
										<div class="row">
											<div class="col-xs-12">
												<h:commandLink id="register-submit" class="btn btn-success btn-block btn-flat btn-lg" action="#{loginBean.addResearcher}">
													#{msg['register']}
													<f:ajax execute="@form" render="message" onevent="registerListener" />
												</h:commandLink>
											</div><!-- /.col -->
										</div>
										
									</h:form>
								</div><!-- /.tab-pane -->
							</div><!-- /.tab-content -->
						</div><!-- nav-tabs-custom -->
						<div class="hidden-xs center-line"> <h:outputText value="#{msg['or']}" /> </div>
					</div>
					<div class="col-sm-5">
						<div class="social-auth-links text-center">
							<a href="#" class="btn btn-block btn-social btn-facebook btn-flat"><i class="fa fa-facebook"></i> <h:outputText value="#{msg['sign_in_with']}" /> Facebook</a>
							<a href="#" class="btn btn-block btn-social btn-twitter btn-flat"><i class="fa fa-twitter"></i> <h:outputText value="#{msg['sign_in_with']}" /> Twitter</a>
							<a href="#" class="btn btn-block btn-social btn-google-plus btn-flat"><i class="fa fa-google-plus"></i> <h:outputText value="#{msg['sign_in_with']}" /> Google+</a>
							<a href="#" class="btn btn-block btn-social btn-linkedin btn-flat"><i class="fa fa-linkedin"></i> <h:outputText value="#{msg['sign_in_with']}" /> LinkedIn</a>
						</div><!-- /.social-auth-links -->
					</div>

				</div>

			</div><!-- /.login-box-body -->
		</div><!-- /.login-box -->

		<!-- jQuery 2.1.4 -->
		<script src="plugins/jQuery/jQuery-2.1.4.min.js"></script>
		<!-- Bootstrap 3.3.2 JS -->
		<script src="bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
		<!-- iCheck -->
		<script src="plugins/iCheck/icheck.min.js" type="text/javascript"></script>
		<script>
			$(function () {
				$('input').iCheck({
					checkboxClass: 'icheckbox_square-green',
					radioClass: 'iradio_square-green',
	  				increaseArea: '20%' // optional
				});
			});
			
			/**
			 * [registerListener Prevents multiple register form submission and display spin icons]
			 * @param  {Object} 	data 	Data about the AJAX request
			 * @return {Undefined}
			 */
			function registerListener (data) {
				var element = document.getElementById('register-form:register-submit');
				
				switch (data.status) {
					case "begin":		// Before the ajax request is sent
						$(element).addClass("disabled");
						$(element).html('<i class="fa fa-spinner fa-spin"></i>');
						break;
						
					case "complete":	// After the ajax response is arrived
						$(element).html("#{msg['register']}");
						break;
					
					case "success": 	// After update the DOM based on ajax response
						$(element).removeClass("disabled");
						break;
				}
			}
		</script>
	</h:body>
</html>